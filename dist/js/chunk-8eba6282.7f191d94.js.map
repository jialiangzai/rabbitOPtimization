{"version":3,"sources":["webpack:///./src/views/Member/settlement/index.vue","webpack:///./src/views/Member/settlement/index.vue?97fe","webpack:///./src/views/Member/settlement/index.vue?406f","webpack:///./src/api/order.js"],"names":["class","width","href","to","orderDetail","curAddress","receiver","contact","fullLocation","address","goods","item","key","id","src","picture","alt","name","attrsText","payPrice","count","totalPrice","totalPayPrice","summary","goodsCount","postFee","type","bg","submitOrder","setup","router","store","getDetail","result","value","userAddresses","reqData","deliveryTimeType","payType","buyerMessage","addressId","map","skuId","push","dispatch","__exports__","render","findCheckoutInfo","request","createOrder","order","findOrder","findOrderList","page","pageSize","orderState"],"mappings":"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","file":"js/chunk-8eba6282.7f191d94.js","sourcesContent":["<template>\r\n  <div class=\"xtx-pay-checkout-page\">\r\n    <div class=\"container\">\r\n      <XtxBread>\r\n        <XtxBreadItem to=\"/\">首页</XtxBreadItem>\r\n        <XtxBreadItem to=\"/cart\">购物车</XtxBreadItem>\r\n        <XtxBreadItem>填写订单</XtxBreadItem>\r\n      </XtxBread>\r\n      <div class=\"wrapper\" v-if=\"orderDetail\">\r\n        <!-- 收货地址 -->\r\n        <h3 class=\"box-title\">收货地址</h3>\r\n        <div class=\"box-body\">\r\n          <div class=\"address\">\r\n            <div class=\"text\">\r\n              <div class=\"none\" v-if=\"!curAddress\">\r\n                您需要先添加收货地址才可提交订单。\r\n              </div>\r\n              <ul v-if=\"curAddress\">\r\n                <li>\r\n                  <span>收<i />货<i />人：</span>{{ curAddress.receiver }}\r\n                </li>\r\n                <li><span>联系方式：</span>{{ curAddress.contact }}</li>\r\n                <li>\r\n                  <span>收货地址：</span\r\n                  >{{ curAddress.fullLocation + curAddress.address }}\r\n                </li>\r\n              </ul>\r\n            </div>\r\n            <div class=\"action\">\r\n              <XtxButton class=\"btn\">切换地址</XtxButton>\r\n              <XtxButton class=\"btn\">添加地址</XtxButton>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <!-- 商品信息 -->\r\n        <h3 class=\"box-title\">商品信息</h3>\r\n        <div class=\"box-body\">\r\n          <table class=\"goods\">\r\n            <thead>\r\n              <tr>\r\n                <th width=\"520\">商品信息</th>\r\n                <th width=\"170\">单价</th>\r\n                <th width=\"170\">数量</th>\r\n                <th width=\"170\">小计</th>\r\n                <th width=\"170\">实付</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr v-for=\"item in orderDetail.goods\" :key=\"item.id\">\r\n                <td>\r\n                  <a href=\"javascript:;\" class=\"info\">\r\n                    <img :src=\"item.picture\" alt=\"\" />\r\n                    <div class=\"right\">\r\n                      <p>{{ item.name }}</p>\r\n                      <p>{{ item.attrsText }}</p>\r\n                    </div>\r\n                  </a>\r\n                </td>\r\n                <td>&yen;{{ item.payPrice }}</td>\r\n                <td>{{ item.count }}</td>\r\n                <td>&yen;{{ item.totalPrice }}</td>\r\n                <td>&yen;{{ item.totalPayPrice }}</td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <!-- 配送时间 -->\r\n        <h3 class=\"box-title\">配送时间</h3>\r\n        <div class=\"box-body\">\r\n          <a class=\"my-btn active\" href=\"javascript:;\"\r\n            >不限送货时间：周一至周日</a\r\n          >\r\n          <a class=\"my-btn\" href=\"javascript:;\">工作日送货：周一至周五</a>\r\n          <a class=\"my-btn\" href=\"javascript:;\">双休日、假日送货：周六至周日</a>\r\n        </div>\r\n        <!-- 支付方式 -->\r\n        <h3 class=\"box-title\">支付方式</h3>\r\n        <div class=\"box-body\">\r\n          <a class=\"my-btn active\" href=\"javascript:;\">在线支付</a>\r\n          <a class=\"my-btn\" href=\"javascript:;\">货到付款</a>\r\n          <span style=\"color: #999\">货到付款需付5元手续费</span>\r\n        </div>\r\n        <!-- 金额明细 -->\r\n        <h3 class=\"box-title\">金额明细</h3>\r\n        <div class=\"box-body\" v-if=\"orderDetail.summary\">\r\n          <div class=\"total\">\r\n            <dl>\r\n              <dt>商品件数：</dt>\r\n              <dd>{{ orderDetail.summary.goodsCount }}件</dd>\r\n            </dl>\r\n            <dl>\r\n              <dt>商品总价：</dt>\r\n              <dd>¥{{ orderDetail.summary.totalPrice }}</dd>\r\n            </dl>\r\n            <dl>\r\n              <dt>运<i></i>费：</dt>\r\n              <dd>¥{{ orderDetail.summary.postFee }}</dd>\r\n            </dl>\r\n            <dl>\r\n              <dt>应付总额：</dt>\r\n              <dd class=\"price\">¥{{ orderDetail.summary.totalPayPrice }}</dd>\r\n            </dl>\r\n          </div>\r\n        </div>\r\n        <!-- 提交订单 -->\r\n        <div class=\"submit\">\r\n          <XtxButton type=\"large\" bg=\"primary\" @click=\"submitOrder\"\r\n            >提交订单</XtxButton\r\n          >\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { findCheckoutInfo, createOrder } from '@/api/order'\r\nimport { ref, reactive } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { useStore } from 'vuex'\r\nexport default {\r\n  name: 'XtxPayCheckoutPage',\r\n  setup () {\r\n    const orderDetail = ref({})\r\n    const curAddress = ref(null)\r\n    const router = useRouter()\r\n    const store = useStore()\r\n    const getDetail = async () => {\r\n      const { result } = await findCheckoutInfo()\r\n      // console.log('结算订单数据', result)\r\n      orderDetail.value = result\r\n      curAddress.value = orderDetail.value.userAddresses[0]\r\n    }\r\n    getDetail()\r\n    // 提交订单\r\n    // deliveryTimeType: 1, 配送时间类型，1为不限，2为工作日，3为双休或假日\r\n    // payType: 1, 支付方式，1为在线支付，2为货到付款\r\n    // buyerMessage: '', 买家留言\r\n    // addressId: null, // 地址id\r\n    // goods: [] // { skuId, count } 由所有商品的skuId 和 count字段组成的数组\r\n    const submitOrder = async () => {\r\n      //  提交订单需要的参数对象\r\n      const reqData = reactive({\r\n        deliveryTimeType: 1,\r\n        payType: 1,\r\n        buyerMessage: '',\r\n        addressId: '1429265915203031042',\r\n        goods: [] // { skuId, count } 由所有商品的skuId 和 count字段组成的数组\r\n      })\r\n      reqData.goods = orderDetail.value.goods.map(({ skuId, count }) => ({ skuId, count }))\r\n      // 调接口\r\n      const { result } = await createOrder(reqData)\r\n      // console.log(123, result)\r\n      router.push(`/pay?id=${result.id}`)\r\n      // 后台已经帮我们做了对应购物车的商品清除我们需要在刷新，拿到数据库最新购物车数据\r\n      store.dispatch('cart/getListActions')\r\n    }\r\n    return { orderDetail, getDetail, curAddress, submitOrder }\r\n  }\r\n}\r\n</script>\r\n<style scoped lang=\"less\">\r\n.xtx-pay-checkout-page {\r\n  .wrapper {\r\n    background: #fff;\r\n    padding: 0 20px;\r\n    .box-title {\r\n      font-size: 16px;\r\n      font-weight: normal;\r\n      padding-left: 10px;\r\n      line-height: 70px;\r\n      border-bottom: 1px solid #f5f5f5;\r\n    }\r\n    .box-body {\r\n      padding: 20px 0;\r\n    }\r\n  }\r\n}\r\n.address {\r\n  border: 1px solid #f5f5f5;\r\n  display: flex;\r\n  align-items: center;\r\n  .text {\r\n    flex: 1;\r\n    min-height: 90px;\r\n    display: flex;\r\n    align-items: center;\r\n    .none {\r\n      line-height: 90px;\r\n      color: #999;\r\n      text-align: center;\r\n      width: 100%;\r\n    }\r\n    > ul {\r\n      flex: 1;\r\n      padding: 20px;\r\n      li {\r\n        line-height: 30px;\r\n        span {\r\n          color: #999;\r\n          margin-right: 5px;\r\n          > i {\r\n            width: 0.5em;\r\n            display: inline-block;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    > a {\r\n      color: @xtxColor;\r\n      width: 160px;\r\n      text-align: center;\r\n      height: 90px;\r\n      line-height: 90px;\r\n      border-right: 1px solid #f5f5f5;\r\n    }\r\n  }\r\n  .action {\r\n    width: 420px;\r\n    text-align: center;\r\n    .btn {\r\n      width: 140px;\r\n      height: 46px;\r\n      line-height: 44px;\r\n      font-size: 14px;\r\n      &:first-child {\r\n        margin-right: 10px;\r\n      }\r\n    }\r\n  }\r\n}\r\n.goods {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  border-spacing: 0;\r\n  .info {\r\n    display: flex;\r\n    text-align: left;\r\n    img {\r\n      width: 70px;\r\n      height: 70px;\r\n      margin-right: 20px;\r\n    }\r\n    .right {\r\n      line-height: 24px;\r\n      p {\r\n        &:last-child {\r\n          color: #999;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  tr {\r\n    th {\r\n      background: #f5f5f5;\r\n      font-weight: normal;\r\n    }\r\n    td,\r\n    th {\r\n      text-align: center;\r\n      padding: 20px;\r\n      border-bottom: 1px solid #f5f5f5;\r\n      &:first-child {\r\n        border-left: 1px solid #f5f5f5;\r\n      }\r\n      &:last-child {\r\n        border-right: 1px solid #f5f5f5;\r\n      }\r\n    }\r\n  }\r\n}\r\n.my-btn {\r\n  width: 228px;\r\n  height: 50px;\r\n  border: 1px solid #e4e4e4;\r\n  text-align: center;\r\n  line-height: 48px;\r\n  margin-right: 25px;\r\n  color: #666666;\r\n  display: inline-block;\r\n  &.active,\r\n  &:hover {\r\n    border-color: @xtxColor;\r\n  }\r\n}\r\n.total {\r\n  dl {\r\n    display: flex;\r\n    justify-content: flex-end;\r\n    line-height: 50px;\r\n    dt {\r\n      i {\r\n        display: inline-block;\r\n        width: 2em;\r\n      }\r\n    }\r\n    dd {\r\n      width: 240px;\r\n      text-align: right;\r\n      padding-right: 70px;\r\n      &.price {\r\n        font-size: 20px;\r\n        color: @priceColor;\r\n      }\r\n    }\r\n  }\r\n}\r\n.submit {\r\n  text-align: right;\r\n  padding: 60px;\r\n  border-top: 1px solid #f5f5f5;\r\n}\r\n</style>\r\n","import { render } from \"./index.vue?vue&type=template&id=435119cf&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=435119cf&scoped=true&lang=less\"\n\nimport exportComponent from \"F:\\\\ithiema\\\\黑马学习\\\\就业班\\\\07rabbit_test\\\\rabbitv0.0.2\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-435119cf\"]])\n\nexport default __exports__","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=435119cf&scoped=true&lang=less\"","import request from '@/utils/request'\r\n\r\n/**\r\n * 获取结算信息\r\n */\r\nexport const findCheckoutInfo = () => {\r\n  return request('/member/order/pre', 'get')\r\n}\r\n/**\r\n * 提交订单\r\n * @param {Object} order - 订单信息对象\r\n *  deliveryTimeType: 1, 配送时间类型，1为不限，2为工作日，3为双休或假日\r\n *  payType: 1, 支付方式，1为在线支付，2为货到付款\r\n *  buyerMessage: '', 买家留言\r\n *  addressId: null, // 地址id\r\n *  goods: [] // { skuId, count } 由所有商品的skuId 和 count字段组成的数组\r\n */\r\nexport const createOrder = (order) => {\r\n  return request('/member/order', 'post', order)\r\n}\r\n/**\r\n * 获取订单详情\r\n * @param {String} id - 订单ID\r\n */\r\nexport const findOrder = (id) => {\r\n  return request('/member/order/' + id, 'get')\r\n}\r\n/**\r\n * 获取订单列表\r\n * @param {String} page - 页码\r\n * @param {String} pageSize - 每页条数\r\n * @param {String} orderState - 订单状态，1为待付款、2为待发货、3为待收货、4为待评价、5为已完成、6为已取消，未传该参数或0为全部\r\n * @returns\r\n */\r\nexport const findOrderList = ({ page = 1, pageSize = 10, orderState = 0 }) => {\r\n  return request('/member/order', 'get', { page, pageSize, orderState })\r\n}\r\n"],"sourceRoot":""}